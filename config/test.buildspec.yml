version: 0.2

env:
  variables:
    NODE_ENV: development

phases:
  install:
    runtime-versions:
      java: corretto11
      nodejs: latest

  pre_build:
    commands:
      - ls -lf
      - npm i
  build:
    commands:
      # - nx affected:test not-your-chat --codeCoverage --skip-nx-cache --base=main~1 --head=main
      - nx affected:test not-your-chat --codeCoverage --skip-nx-cache
  post_build:
    commands:
      - ls -lf
reports:
  not-your-chat-test-report:
  files:
    - coverage/apps/not-your-chat
